import{D as t,G as e,a5 as o,E as s,Y as l,S as a,ac as i,ai as n,a_ as r,aj as c,ap as p,a1 as u,d as v,aT as d,y as h,J as f,T as y,K as m,o as b,b as g,c as $,w,X as C,v as k,h as x,O,N as _,F as j,l as A,C as I,x as T,k as N,q as R,Q as S,U,L as B,av as G,i as L,R as V,P as q,_ as D}from"./index-9a4aa426.js";import{_ as E}from"./popup.ce3c8dc4.js";import{u as F}from"./useRect.14507623.js";const H={...t,visible:Boolean,list:e([]),theme:o("light"),location:o("bottom"),offset:e([0,12]),arrowOffset:s(0),showArrow:l,duration:a(300),overlay:Boolean,overlayClass:o(""),overlayStyle:{type:Object},closeOnClickOverlay:l,closeOnClickAction:l,closeOnClickOutside:l,bgColor:o(""),targetId:o("")},J={update:t=>i(t),[n]:t=>i(t),[r]:()=>!0,[c]:()=>!0,[p]:(t,e)=>t instanceof Object||u(e)},K=`${V}-popover`,P=v({name:K,options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"}}),Q=D(v({...P,props:H,emits:J,setup(t,{emit:e}){const o=t,s=e,l=q(),a=`popoverRef${d()}`,i=`popoverContentRef${d()}`,u=h(o.visible),v=h(),V=h({width:0,height:0}),D=f((()=>S(o,K,{[`hs-popover--${o.theme}`]:!0}))),H=f((()=>{const t="hs-popover-arrow",e=o.location;return`${t} ${t}-${e.split("-")[0]} ${t}--${e}`})),J=f((()=>{const t={},{bgColor:e,arrowOffset:s,location:l}=o,a=l.split("-")[0],i=l.split("-")[1];var n;return e&&(t[`border${n=a,n=(n=n.toLowerCase()).replace(/\b\w+\b/g,(t=>t.substring(0,1).toUpperCase()+t.substring(1)))}Color`]=e),0!==o.arrowOffset&&(["bottom","top"].includes(a)&&(i||(t.left=`calc(50% + ${s}px)`),"start"===i&&(t.left=`${16+s}px`),"end"===i&&(t.right=16-s+"px")),["left","right"].includes(a)&&(i||(t.top=`calc(50% - ${s}px)`),"start"===i&&(t.top=16-s+"px"),"end"===i&&(t.bottom=`${16+s}px`))),t}));const P=f((()=>{const t={};if(!v.value)return t.visibility="hidden",t;const e=V.value.width,s=V.value.height,{width:l,height:a,left:i,top:n,right:r}=v.value,{location:c,offset:p}=o,u=null==c?void 0:c.split("-")[0],d=null==c?void 0:c.split("-")[1];let h=0,f=0;if(Array.isArray(p)&&2===(null==p?void 0:p.length)&&(h+=Number(p[1]),f+=Number(p[0])),l){if(["bottom","top"].includes(u)){const o="bottom"===u?a+h:-(s+h);t.top=`${n+o}px`,d||(t.left=`${-(e-l)/2+i+f}px`),"start"===d&&(t.left=`${i+f}px`),"end"===d&&(t.left=`${r+f}px`)}if(["left","right"].includes(u)){const o="left"===u?-(e+h):l+h;t.left=`${i+o}px`,d||(t.top=`${n-s/2+a/2-4+f}px`),"start"===d&&(t.top=`${n+f}px`),"end"===d&&(t.top=`${n+a+f}px`)}}return 0===V.value.width?t.visibility="hidden":t.visibility="initial",t})),Q=f((()=>{const t={};return o.bgColor&&(t.background=o.bgColor),U(o,t)}));async function X(){B().selectViewport().scrollOffset((t=>{const e=t.scrollTop;o.targetId?F(o.targetId,l.root).then((t=>{v.value={width:t.width,height:t.height,left:t.left,top:t.top+e,right:t.right}})):F(a,l).then((t=>{v.value={width:t.width,height:t.height,left:t.left,top:t.top+e,right:t.right}}))})).exec(),setTimeout((()=>{!async function(){F(i,l).then((t=>{V.value={width:t.width,height:t.height}}))}()}),300)}function Y(){var t;t=!o.visible,s("update",t),s(n,t),s(r)}function z(){s(n,!1),s(c)}function M(){o.closeOnClickOutside&&z()}return y((()=>o.visible),(t=>{u.value=t,t&&G((()=>{X()}))})),y((()=>o.location),(t=>{X()})),m((()=>{setTimeout((()=>{X()}),300)})),(t,e)=>{const l=L;return b(),g(j,null,[t.targetId?k("",!0):(b(),$(l,{key:0,id:a,class:"hs-popover-wrapper",onClick:Y},{default:w((()=>[C(t.$slots,"reference",{},void 0,!0)])),_:3})),x(l,{class:O(D.value),style:_(P.value)},{default:w((()=>[x(E,{visible:u.value,"onUpdate:visible":e[0]||(e[0]=t=>u.value=t),"destroy-on-close":!1,"pop-class":`hs-popover-content hs-popover-content--${t.location}`,"custom-style":Q.value,position:"",transition:"hs-popover",overlay:t.overlay,duration:+t.duration,"overlay-style":t.overlayStyle,"overlay-class":t.overlayClass,"close-on-click-overlay":t.closeOnClickOverlay},{default:w((()=>[x(l,{id:i,class:"hs-popover-content-group"},{default:w((()=>[t.showArrow?(b(),$(l,{key:0,class:O(H.value),style:_(J.value)},null,8,["class","style"])):k("",!0),C(t.$slots,"content",{},void 0,!0),(b(!0),g(j,null,A(t.list,((t,e)=>(b(),$(l,{key:e,class:O(["hs-popover-menu-item",[t.className,t.disabled&&"hs-popover-menu-disabled"]]),onClick:I((l=>function(t,e){!t.disabled&&s(p,t,e),o.closeOnClickAction&&z()}(t,e)),["stop"])},{default:w((()=>[t.icon?(b(),$(T,{key:0,name:t.icon,"custom-class":"hs-popover-item-img"},null,8,["name"])):k("",!0),x(l,{class:"hs-popover-menu-item-name"},{default:w((()=>[N(R(t.name),1)])),_:2},1024)])),_:2},1032,["class","onClick"])))),128))])),_:3})])),_:3},8,["visible","pop-class","custom-style","overlay","duration","overlay-style","overlay-class","close-on-click-overlay"]),x(l,{class:O(["hs-popover-content-bg",{"hs-hidden":!u.value}]),onTouchmove:M,onClick:M},null,8,["class"])])),_:3},8,["class","style"])],64)}}}),[["__scopeId","data-v-a2558910"]]);export{Q as N};
