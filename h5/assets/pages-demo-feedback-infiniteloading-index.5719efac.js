import{_ as e}from"./cell.b00ee112.js";/* empty css              */import{a0 as t,b3 as s,d as o,r as l,J as a,K as i,o as n,c as r,w as c,h as u,N as d,x as f,k as p,q as h,a as g,X as m,v as T,O as y,i as x,ak as b,R as _,P as M,_ as I,y as v,t as H,B as S,g as L,j,b as $,l as R,F as k}from"./index-9a4aa426.js";import{u as w}from"./useSelectorQuery.5ef6b069.js";import{u as B}from"./useTranslate.6f3ff1af.js";const C={hasMore:{type:Boolean,default:!0},threshold:{type:Number,default:200},upperThreshold:{type:Number,default:40},pullIcon:{type:String,default:"https://img10.360buyimg.com/imagetools/jfs/t1/169863/6/4565/6306/60125948E7e92774e/40b3a0cf42852bcb.png"},pullTxt:{type:String,default:""},loadIcon:{type:String,default:"https://img10.360buyimg.com/imagetools/jfs/t1/169863/6/4565/6306/60125948E7e92774e/40b3a0cf42852bcb.png"},loadTxt:{type:String,default:""},loadMoreTxt:{type:String,default:""},useWindow:{type:Boolean,default:!0},containerId:{type:String,default:""},useCapture:{type:Boolean,default:!1},isOpenRefresh:{type:Boolean,default:!1}},D={scrollChange:e=>t(e),loadMore:e=>s(e),refresh:e=>s(e)},N=`${_}-infiniteloading`,O=o({name:N,options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"}}),{translate:q}=B(N),z=I(o({...O,props:C,emits:D,setup(e,{emit:t}){const s=e,o=t,_=M(),{query:I}=w(_),v=l({scrollHeight:0,scrollTop:0,isInfiniting:!1,direction:"down",isTouching:!1,refreshMaxH:0,y:0,x:0,distance:0}),H=a((()=>({[N]:!0}))),S=a((()=>({height:v.distance<0?"0px":`${v.distance}px`,transition:v.isTouching?"height 0s cubic-bezier(0.25,0.1,0.25,1)":"height 0.2s cubic-bezier(0.25,0.1,0.25,1)"})));function L(){var e;(e="scroller",I.select(s.containerId?`#${s.containerId} #${e}`:`#${e}`)).boundingClientRect((e=>{v.scrollHeight=(null==e?void 0:e.height)||0})).exec()}function j(){if("up"===v.direction||!s.hasMore||v.isInfiniting)return!1;v.isInfiniting=!0,o("loadMore",R)}function $(e){e.detail.scrollTop<=0?e.detail.scrollTop=0:e.detail.scrollTop>=v.scrollHeight&&(e.detail.scrollTop=v.scrollHeight),e.detail.scrollTop>v.scrollTop||e.detail.scrollTop>=v.scrollHeight?v.direction="down":v.direction="up",v.scrollTop=e.detail.scrollTop,o("scrollChange",e.detail.scrollTop)}function R(){v.isInfiniting=!1}function k(e){0===v.scrollTop&&!v.isTouching&&s.isOpenRefresh&&(v.y=e.touches[0].pageY,v.isTouching=!0)}function B(e){v.distance=e.touches[0].pageY-v.y,v.distance>0&&v.isTouching?(e.preventDefault(),v.distance>=v.refreshMaxH&&(v.distance=v.refreshMaxH)):(v.distance=0,v.isTouching=!1)}function C(){v.distance<v.refreshMaxH?v.distance=0:o("refresh",D)}function D(){v.distance=0,v.isTouching=!1}return i((()=>{v.refreshMaxH=s.upperThreshold,setTimeout((()=>{L()}),200)})),(e,t)=>{const s=x,o=b;return n(),r(o,{id:"scroller",class:y(H.value),"scroll-y":!0,style:{height:"100%"},onScrolltolower:j,onScroll:$,onTouchstart:k,onTouchmove:B,onTouchend:C},{default:c((()=>[u(s,{class:"hs-infinite-top",style:d(S.value)},{default:c((()=>[u(s,{id:"refreshTop",class:"top-box"},{default:c((()=>[u(f,{"custom-class":"top-img",name:e.pullIcon},null,8,["name"]),u(s,{class:"top-text"},{default:c((()=>[p(h(e.pullTxt||g(q)("pullTxt")),1)])),_:1})])),_:1})])),_:1},8,["style"]),u(s,{class:"hs-infinite-container"},{default:c((()=>[m(e.$slots,"default",{},void 0,!0)])),_:3}),u(s,{class:"hs-infinite-bottom"},{default:c((()=>[v.isInfiniting?(n(),r(s,{key:0,class:"bottom-box"},{default:c((()=>[u(f,{"custom-class":"bottom-img",name:e.loadIcon},null,8,["name"]),u(s,{class:"bottom-text"},{default:c((()=>[p(h(e.loadTxt||g(q)("loading")),1)])),_:1})])),_:1})):e.hasMore?T("",!0):(n(),r(s,{key:1,class:"tips"},{default:c((()=>[p(h(e.loadMoreTxt||g(q)("loadMoreTxt")),1)])),_:1}))])),_:1})])),_:3},8,["class","onTouchstart","onTouchmove"])}}}),[["__scopeId","data-v-fab8d6b8"]]);const E=I({props:{},setup(){const e=v(!0),t=l({defultList:[""]});return i((()=>{(()=>{for(let e=0;e<20;e++)t.defultList.push(`${e}`)})()})),{loadMore:s=>{setTimeout((()=>{const o=t.defultList.length;for(let e=o;e<o+10;e++)t.defultList.push(`${e}`);t.defultList.length>30&&(e.value=!1),s()}),500)},hasMore:e,refresh:e=>{setTimeout((()=>{S({title:"刷新成功"}),e()}),1e3)},...H(t)}}},[["render",function(t,s,o,l,a,i){const d=x,f=z,g=e,m=L("layout-default-uni");return n(),r(m,null,{default:c((()=>[u(d,{class:"demo"},{default:c((()=>[j("h2",{class:"title"}," 基础演示 "),u(g,null,{default:c((()=>[u(d,{id:"scrollDemo",class:"infiniteUl"},{default:c((()=>[u(f,{"pull-icon":"JD","load-txt":"loading","load-more-txt":"没有啦～","is-open-refresh":!0,"container-id":"scrollDemo","has-more":l.hasMore,onLoadMore:l.loadMore,onRefresh:l.refresh},{default:c((()=>[(n(!0),$(k,null,R(t.defultList,((e,t)=>(n(),r(d,{key:t,class:"infiniteLi"},{default:c((()=>[p(h(e),1)])),_:2},1024)))),128))])),_:1},8,["has-more","onLoadMore","onRefresh"])])),_:1})])),_:1})])),_:1})])),_:1})}],["__scopeId","data-v-8e7913d3"]]);export{E as default};
