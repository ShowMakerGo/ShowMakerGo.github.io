import{D as e,S as a,a5 as t,Y as o,a6 as i,a0 as s,d as l,aT as n,r as u,J as c,bd as r,aF as v,T as f,o as h,c as p,w as d,h as m,O as g,N as y,X as w,b as T,F as $,l as b,a as P,v as x,av as _,i as C,R as j,P as z,b5 as D,_ as I,Q as M,U as S}from"./index-9a4aa426.js";import{r as X}from"./raf.db71c386.js";import{u as Y}from"./useTouch.ef102360.js";import{u as E}from"./useProvide.92abce79.js";import{u as N}from"./useRect.14507623.js";import{u as O}from"./useInject.f710a5e3.js";const U={...e,width:a(""),height:a(""),direction:t("horizontal"),paginationVisible:Boolean,paginationColor:t("#fff"),loop:o,duration:a(500),autoPlay:a(0),isAutoPlay:o,initPage:a(0),touchable:o,isPreventDefault:o,isStopPropagation:o,list:{type:Array,default:()=>[]},paginationUnselectedColor:t("#ddd")},V={[i]:e=>s(e)},k=Symbol("swiper"),A=`${j}-swiper`,F=l({name:A,options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"}}),G=I(l({...F,props:U,emits:V,setup(e,{expose:a,emit:t}){const o=e,i=t,s=z(),l=`container-${n()}`,j=u({active:0,num:0,rect:null,width:0,height:0,moving:!1,offset:0,touchTime:0,autoplayTimer:null,childrenVNode:[],style:{}}),I=Y(),M=c((()=>({[A]:!0}))),S=c((()=>"vertical"===o.direction)),O=c((()=>({[`${A}-inner`]:!0,[`${A}-vertical`]:S.value}))),U=c((()=>({[`${A}-pagination`]:!0,[`${A}-pagination-vertical`]:S.value}))),V=c((()=>S.value?I.deltaY.value:I.deltaX.value)),F=c((()=>I.direction.value===o.direction)),G=c((()=>q.length)),H=c((()=>j[S.value?"height":"width"])),R=c((()=>G.value*H.value)),B=c((()=>{if(j.rect){return(S.value?j.rect.height:j.rect.width)-H.value*G.value}return 0})),J=c((()=>(j.active+G.value)%G.value));function Q(){let e=0;e=j.offset,j.style={transitionDuration:`${j.moving?0:o.duration}ms`,transform:`translate${S.value?"Y":"X"}(${e}px)`,[S.value?"height":"width"]:H.value*G.value+"px",[S.value?"width":"height"]:`${S.value?j.width:j.height}px`}}const{internalChildren:q}=E(k,"hs-form-swiper")({props:o,size:H});function K(e,a=0){let t=e*H.value;o.loop||(t=Math.min(t,-B.value));let i=a-t;return o.loop||(i=D(i,B.value,0)),i}function L({pace:e=0,offset:a=0,isEmit:t=!1}){if(G.value<=1)return;const{active:s}=j,l=function(e){const{active:a}=j;return e?o.loop?D(a+e,-1,G.value):D(a+e,0,G.value-1):a}(e),n=K(l,a);if(o.loop){if(q[0]&&n!==B.value){const e=n<B.value;q[0].exposed.setOffset(e?R.value:0)}if(q[G.value-1]&&0!==n){const e=n>0;q[G.value-1].exposed.setOffset(e?-R.value:0)}}j.active=l,j.offset=n,t&&s!==j.active&&i("change",J.value),Q()}function W(){j.moving=!0,j.active<=-1&&L({pace:G.value}),j.active>=G.value&&L({pace:-G.value})}function Z(){j.autoplayTimer&&clearTimeout(j.autoplayTimer)}function ee(e){W(),I.reset(),X((()=>{X((()=>{j.moving=!1,L({pace:e,isEmit:!0})}))}))}function ae(){ee(1)}function te(){+o.autoPlay<=0||G.value<=1||(Z(),j.autoplayTimer=setTimeout((()=>{ae(),te()}),Number(o.autoPlay)))}async function oe(e=+o.initPage){Z(),j.rect=await N(l,s),j.rect&&(e=Math.min(G.value-1,e),j.width=o.width?+o.width:j.rect.width,j.height=o.height?+o.height:j.rect.height,j.active=e,j.offset=K(j.active),j.moving=!0,Q(),te())}function ie(e){o.isStopPropagation&&e.stopPropagation(),o.touchable&&(I.start(e),j.touchTime=Date.now(),Z(),W())}function se(e){o.touchable&&j.moving&&(I.move(e),F.value&&L({offset:V.value}))}function le(e){if(!o.touchable||!j.moving)return;const a=V.value/(Date.now()-j.touchTime);if((Math.abs(a)>.3||Math.abs(V.value)>+(H.value/2).toFixed(2))&&F.value){let e=0;const a=S.value?I.offsetY.value:I.offsetX.value;e=o.loop?a>0?V.value>0?-1:1:0:-Math[V.value>0?"ceil":"floor"](V.value/H.value),L({pace:e,isEmit:!0})}else V.value&&L({pace:0});j.moving=!1,Q(),te()}return a({prev:function(){ee(-1)},next:ae,to:function(e){W(),I.reset(),X((()=>{let a;j.moving=!1,a=o.loop&&G.value===e?0===j.active?0:e:e%G.value,L({pace:a-j.active,isEmit:!0})}))}}),r((()=>{Z()})),v((()=>{Z()})),f((()=>o.initPage),(e=>{_((()=>{oe(+e)}))})),f((()=>o.height),(e=>{_((()=>{oe(+e)}))})),f((()=>q.length),(()=>{_((()=>{oe()}))})),f((()=>o.autoPlay),(e=>{+e>0?te():Z()})),(e,a)=>{const t=C;return h(),p(t,{id:l,class:g([M.value,e.customClass]),"catch-move":e.isPreventDefault,style:y([e.customStyle]),onTouchstart:ie,onTouchmove:se,onTouchend:le,onTouchcancel:le},{default:d((()=>[m(t,{class:g(O.value),style:y(j.style)},{default:d((()=>[w(e.$slots,"default",{},void 0,!0)])),_:3},8,["class","style"]),w(e.$slots,"page",{},void 0,!0),e.paginationVisible&&!e.$slots.page?(h(),p(t,{key:0,class:g(U.value)},{default:d((()=>[(h(!0),T($,null,b(P(q).length,((a,t)=>(h(),T("i",{key:t,class:g(["pagination",{active:J.value===t}]),style:y({backgroundColor:J.value===t?e.paginationColor:e.paginationUnselectedColor})},null,6)))),128))])),_:1},8,["class"])):x("",!0)])),_:3},8,["class","catch-move","style","onTouchstart","onTouchmove","onTouchend","onTouchcancel"])}}}),[["__scopeId","data-v-76a5519f"]]),H={...e},R=`${j}-swiper-item`,B=l({name:R,options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"}}),J=I(l({...B,props:H,setup(e,{expose:a}){const t=e,{parent:o}=O(k),i=u({offset:0}),s=c((()=>M(t,R))),l=c((()=>{const e={},a=null==o?void 0:o.props.direction;return(null==o?void 0:o.size.value)&&(e["horizontal"===a?"width":"height"]=`${null==o?void 0:o.size.value}px`),i.offset&&(e.transform=`translate${"horizontal"===a?"X":"Y"}(${i.offset}px)`),S(t,e)}));return a({setOffset:function(e){i.offset=e}}),(e,a)=>{const t=C;return h(),p(t,{class:g(s.value),style:y(l.value)},{default:d((()=>[w(e.$slots,"default",{},void 0,!0)])),_:3},8,["class","style"])}}}),[["__scopeId","data-v-2d848409"]]);export{G as _,J as a};
