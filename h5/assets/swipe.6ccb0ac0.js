import{D as o,H as a,a1 as e,d as t,y as s,J as n,aT as l,an as u,T as c,K as i,r as f,o as v,c as r,w as h,h as d,X as p,O as m,N as T,Q as g,U as _,i as b,R as w,P as M,_ as P}from"./index-9a4aa426.js";import{u as $}from"./useTouch.ef102360.js";import{u as k}from"./useRect.14507623.js";const y={...o,name:String,touchMoveStopPropagation:Boolean,touchMovePreventDefault:Boolean,disabled:Boolean},j={open:o=>o instanceof Object,close:o=>o instanceof Object,[a]:o=>e(o)},S=`${w}-swipe`,x=t({name:S,options:{virtualHost:!0,addGlobalClass:!0}}),C=P(t({...x,props:y,emits:j,setup(o,{expose:e,emit:t}){const w=o,P=t,y=M(),j=s(!1),x=n((()=>g(w,S)));async function C(o){return(await k(o,y)).width||0}const D=l(),R=`leftRef-${D}`,B=s(0),E=`rightRef-${D}`,H=s(0);const O=u("swipeGroup",null);c((()=>{var o;return null==(o=null==O?void 0:O.name)?void 0:o.value}),(o=>{w.name!==o&&O&&O.lock&&J()})),i((()=>{setTimeout((()=>{!async function(){B.value=await C(R),H.value=await C(E)}()}),100)}));const G=s(!1);let U="",X="";const z=f({offset:0,moving:!1});function I(o=""){O&&O.update(w.name),G.value=!0,o&&(z.offset="left"===o?-H.value:B.value),P("open",{name:w.name,position:U||o})}function J(){z.offset=0,G.value&&(G.value=!1,P("close",{name:w.name,position:U}))}function K(o,e,t){t?o.stopPropagation():J(),P(a,e)}const N=n((()=>_(w,{transform:`translate3d(${z.offset}px, 0, 0)`})));const Q=$(),V={onTouchStart(o){w.disabled||Q.start(o)},async onTouchMove(o){w.disabled||(Q.move(o),Q.isHorizontal()&&(j.value=!0,z.moving=!0,function(o){U=o>0?"right":"left";let a=o;switch(U){case"left":a=G.value&&X===U||Math.abs(o)>H.value?-H.value:o;break;case"right":a=G.value&&X===U||Math.abs(o)>B.value?B.value:o}z.offset=a}(Q.deltaX.value),w.touchMovePreventDefault&&o.preventDefault(),w.touchMoveStopPropagation&&o.stopPropagation()))},onTouchEnd(){if(z.moving){switch(z.moving=!1,X=U,U){case"left":Math.abs(z.offset)<=H.value/2?J():(z.offset=-H.value,I());break;case"right":Math.abs(z.offset)<=B.value/2?J():(z.offset=B.value,I())}setTimeout((()=>{j.value=!1}),0)}}};return e({open:I,close:J}),(o,a)=>{const e=b;return v(),r(e,{class:m(x.value),style:T(N.value),onTouchstart:V.onTouchStart,onTouchmove:V.onTouchMove,onTouchend:V.onTouchEnd,onTouchcancel:V.onTouchEnd},{default:h((()=>[d(e,{id:R,class:"hs-swipe__left",onClick:a[0]||(a[0]=o=>K(o,"left",!0))},{default:h((()=>[p(o.$slots,"left",{},void 0,!0)])),_:3}),d(e,{class:"hs-swipe__content",onClick:a[1]||(a[1]=o=>K(o,"content",j.value))},{default:h((()=>[p(o.$slots,"default",{},void 0,!0)])),_:3}),d(e,{id:E,class:"hs-swipe__right",onClick:a[2]||(a[2]=o=>K(o,"right",!0))},{default:h((()=>[p(o.$slots,"right",{},void 0,!0)])),_:3})])),_:3},8,["class","style","onTouchstart","onTouchmove","onTouchend","onTouchcancel"])}}}),[["__scopeId","data-v-39123317"]]);export{C as _};
