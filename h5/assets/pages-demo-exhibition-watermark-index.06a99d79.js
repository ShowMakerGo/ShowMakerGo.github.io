import{_ as a}from"./cell.b00ee112.js";/* empty css              */import{D as e,E as t,a5 as l,S as s,Y as r,H as o,d as n,r as i,t as u,T as c,J as d,o as g,c as f,O as m,N as v,Q as h,U as p,i as w,R as x,_ as y,y as b,w as k,g as I,j as S,h as _,k as j,v as C,m as z}from"./index-9a4aa426.js";import{_ as $}from"./button.37ee0c5d.js";/* empty css              */const P={...e,name:String,gapY:t(48),gapX:t(24),zIndex:t(2e3),width:t(120),height:t(64),rotate:t(-22),image:String,imageWidth:t(120),imageHeight:t(64),content:{type:[String,Array],default:""},fontColor:l("rgba(0,0,0,.15)"),fontStyle:l("normal"),fontFamily:l("PingFang SC"),fontWeight:l("normal"),fontSize:s(14),fullPage:r},U={[o]:a=>a instanceof Object},A=`${x}-watermark`,E=n({name:A,options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"}}),M=y(n({...E,props:P,emits:U,setup(a){const e=a,t=i({base64Url:""}),{zIndex:l,gapX:s,gapY:r,width:o,height:n,rotate:x,image:y,imageWidth:b,imageHeight:k,content:I,fontStyle:S,fontWeight:_,fontColor:j,fontSize:C,fontFamily:z}=u(e);function $(){const a=document.createElement("canvas"),e=window.devicePixelRatio,l=a.getContext("2d"),i=(s.value+o.value)*e+"px",u=(r.value+n.value)*e+"px",c=o.value*e,d=n.value*e;if(a.setAttribute("width",i),a.setAttribute("height",u),!l)throw new Error("当前环境不支持Canvas");if(null==y?void 0:y.value){!function(a,e,l,s,r,o){a.translate(r/2,o/2),a.rotate(Math.PI/180*Number(x.value)),e.crossOrigin="anonymous",e.referrerPolicy="no-referrer",e.src=y.value,e.onload=()=>{a.drawImage(e,-b.value*l/2,-k.value*l/2,b.value*l,k.value*l),a.restore(),t.base64Url=s.toDataURL()}}(l,new Image,e,a,c,d)}else(null==I?void 0:I.value)&&function(a,e,l,s,r){var o;a.textBaseline="middle",a.textAlign="center",a.translate(s/2,r/2),a.rotate(Math.PI/180*Number(x.value));const n=Number(C.value)*e;a.font=`${S.value} normal ${_.value} ${n}px/${r}px ${z.value}`,a.fillStyle=j.value,Array.isArray(I.value)?null==(o=I.value)||o.forEach(((e,t)=>{a.fillText(e,0,(t-1)*n)})):a.fillText(I.value,0,0);a.restore(),t.base64Url=l.toDataURL()}(l,e,a,c,d)}$(),c((()=>[l.value,s.value,r.value,o.value,n.value,x.value,null==y?void 0:y.value,b.value,k.value,null==I?void 0:I.value,S.value,_.value,j.value,C.value,z.value]),(()=>{$()}));const P=d((()=>h(e,A,{[`${A}-full-page`]:e.fullPage}))),U=d((()=>p(e,{zIndex:e.zIndex,backgroundSize:`${e.gapX+e.width}px`,backgroundImage:`url('${t.base64Url}')`})));return(a,e)=>{const t=w;return g(),f(t,{class:m(P.value),style:v(U.value)},null,8,["class","style"])}}}),[["__scopeId","data-v-0c0351f0"]]);const T=y(n({setup(){const a=b("//img10.360buyimg.com/ling/jfs/t1/181258/24/10385/53029/60d04978Ef21f2d42/92baeb21f907cd24.jpg"),e=b("http://img11.360buyimg.com/imagetools/jfs/t1/57345/6/20069/8019/62b995cdEd96fef03/51d3302dfeccd1d2.png"),t=b(!1);return{src:a,imgSrc:e,showTextMark:()=>{t.value=!1},showImageMark:()=>{t.value=!0},flag:t}}}),[["render",function(e,t,l,s,r,o){const n=$,i=M,u=a,c=z,d=I("layout-default-uni");return g(),f(d,null,{default:k((()=>[S("div",{class:"demo watermark-demo h-100vh!"},[S("h2",{class:"title"}," 基础用法 "),_(u,{class:"wrap"},{default:k((()=>[_(n,{onClick:e.showTextMark},{default:k((()=>[j(" 文字水印 ")])),_:1},8,["onClick"]),_(n,{onClick:e.showImageMark},{default:k((()=>[j(" 图片水印 ")])),_:1},8,["onClick"]),e.flag?C("",!0):(g(),f(i,{key:0,class:"mark1","z-index":1,content:"hs-ui-water-mark"})),e.flag?(g(),f(i,{key:1,class:"mark1","image-width":60,"image-height":23,"z-index":1,image:e.imgSrc},null,8,["image"])):C("",!0)])),_:1}),S("h2",{class:"title"}," 局部用法 "),_(u,{class:"wrap wrap2"},{default:k((()=>[_(c,{src:e.src,alt:""},null,8,["src"]),_(i,{"full-page":!1,"font-color":"#fa2c19",content:"hs-ui"})])),_:1}),S("h2",{class:"title"}," 多行水印 "),_(u,{class:"wrap wrap2"},{default:k((()=>[_(i,{"full-page":!1,"gap-y":24,"font-color":"#fa2c19",content:["hs-ui","water-mark"]})])),_:1})])])),_:1})}],["__scopeId","data-v-f1614dd6"]]);export{T as default};
