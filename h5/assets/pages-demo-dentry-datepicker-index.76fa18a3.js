import{_ as e}from"./index.d7aa9c4c.js";import{_ as t}from"./popup.ce3c8dc4.js";/* empty css              */import{_ as a}from"./button.37ee0c5d.js";/* empty css              */import{_ as n}from"./cell.b00ee112.js";/* empty css              */import{a5 as o,E as r,aw as i,Y as l,S as m,H as u,ax as s,ad as c,a6 as d,ab as D,d as p,r as f,J as h,ay as x,T as y,o as g,c as w,w as b,X as V,az as v,av as C,R as k,aA as j,_ as M,y as N,t as T,g as S,j as U,h as Y,k as _}from"./index-9a4aa426.js";import{_ as F}from"./picker.5c96f98f.js";import"./transition.47a8b3f2.js";import"./overlay.65ef5d67.js";import"./useTouch.ef102360.js";import"./useTranslate.6f3ff1af.js";const H=(new Date).getFullYear(),O={modelValue:{type:[Date,String,Number]},title:o(""),okText:o(""),cancelText:o(""),type:o("date"),isShowChinese:Boolean,minuteStep:r(1),minDate:{type:Date,default:()=>new Date(H-10,0,1),validator:i},maxDate:{type:Date,default:()=>new Date(H+10,11,31),validator:i},formatter:{type:Function,default:null},threeDimensional:l,swipeDuration:m(1e3),filter:Function,showToolbar:l,visibleOptionNum:m(7),optionHeight:m(36)},$={[u]:()=>!0,[s]:e=>e instanceof Object,[c]:e=>e instanceof Object,[d]:e=>e instanceof Object,[D]:e=>e instanceof Object},I=p({name:`${k}-date-picker`,options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"}}),E=M(p({...I,props:O,emits:$,setup(e,{emit:t}){const a=e,n=t;const o={day:"日",year:"年",month:"月",hour:"时",minute:"分",seconds:"秒"},r=f({currentDate:new Date,title:a.title,selectedValue:[]});function l(e){var t;(!i(t=e)||Number.isNaN(t.getTime()))&&(e=a.minDate);let n=Math.max(e.getTime(),a.minDate.getTime());return n=Math.min(n,a.maxDate.getTime()),new Date(n)}function m(e,t){return 32-new Date(e,t-1,32).getDate()}function u(e,t){const n="min"===e?a.minDate:a.maxDate,o=n.getFullYear();let r=1,i=1,l=0,u=0;"max"===e&&(r=12,i=m(t.getFullYear(),t.getMonth()+1),l=23,u=59);let s=u;return t.getFullYear()===o&&(r=n.getMonth()+1,t.getMonth()+1===r&&(i=n.getDate(),t.getDate()===i&&(l=n.getHours(),t.getHours()===l&&(u=n.getMinutes(),t.getMinutes()===u&&(s=n.getSeconds()))))),{[`${e}Year`]:o,[`${e}Month`]:r,[`${e}Date`]:i,[`${e}Hour`]:l,[`${e}Minute`]:u,[`${e}Seconds`]:s}}const d=h((()=>{const{maxYear:e,maxDate:t,maxMonth:a,maxHour:n,maxMinute:o,maxSeconds:i}=u("max",r.currentDate),{minYear:l,minDate:m,minMonth:s,minHour:c,minMinute:d,minSeconds:D}=u("min",r.currentDate);return S([{type:"year",range:[l,e]},{type:"month",range:[s,a]},{type:"day",range:[m,t]},{type:"hour",range:[c,n]},{type:"minute",range:[d,o]},{type:"seconds",range:[D,i]}])})),p=h((()=>d.value.map(((e,t)=>function(e,t,n,o,i){var l;const m=[];let u=0;for(;e<=t;)m.push(M(o,e)),"minute"===o?e+=a.minuteStep:e++,e<=+n&&u++;return r.selectedValue[i]=null==(l=m[u])?void 0:l.value,a.filter?a.filter(o,m):m}(e.range[0],e.range[1],function(e){if("year"===e)return r.currentDate.getFullYear();if("month"===e)return r.currentDate.getMonth()+1;if("day"===e)return r.currentDate.getDate();if("hour"===e)return r.currentDate.getHours();if("minute"===e)return r.currentDate.getMinutes();if("seconds"===e)return r.currentDate.getSeconds();return 0}(e.type),e.type,t)))));function k({columnIndex:e,selectedValue:t,selectedOptions:o}){const i=[];t.forEach((e=>{i.push(e)})),"month-day"===a.type&&i.length<3&&i.unshift(new Date(r.currentDate||a.minDate||a.maxDate).getFullYear()),"year-month"===a.type&&i.length<3&&i.push(new Date(r.currentDate||a.minDate||a.maxDate).getDate());const u=Number(i[0]),s=Number(i[1])-1,c=Math.min(Number(i[2]),m(Number(i[0]),Number(i[1])));let d=null;if("date"===a.type||"month-day"===a.type||"year-month"===a.type)d=new Date(u,s,c);else if("datetime"===a.type)d=new Date(u,s,c,Number(i[3]),Number(i[4]));else if("datehour"===a.type)d=new Date(u,s,c,Number(i[3]));else if("hour-minute"===a.type||"time"===a.type){d=new Date(r.currentDate);const e=d.getFullYear(),t=d.getMonth(),a=d.getDate();d=new Date(e,t,a,Number(i[0]),Number(i[1]),Number(i[2]||0))}r.currentDate=l(d),n("change",{columnIndex:e,selectedValue:t,selectedOptions:o})}function M(e,t){const{formatter:n,isShowChinese:r}=a;let i=null;if(n)i=n(e,{text:j(t,2),value:j(t,2)});else{const a=j(t,2);i={text:a+(r?o[e]:""),value:a}}return i}function N(e){n(s,e)}function T(e){n(c,e)}function S(e){switch(a.type){case"date":e=e.slice(0,3);break;case"datetime":e=e.slice(0,5);break;case"time":e=e.slice(3,6);break;case"year-month":e=e.slice(0,2);break;case"month-day":e=e.slice(1,3);break;case"datehour":e=e.slice(0,4);break;case"hour-minute":e=e.slice(3,5)}return e}function U(e){return S([e.getFullYear(),e.getMonth()+1,e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds()].map((e=>String(e))))}return x((()=>{r.currentDate=l(a.modelValue)})),y((()=>a.modelValue),(e=>{const t=l(e);v(t,r.currentDate)||(r.currentDate=t,r.selectedValue=U(t))})),y((()=>r.currentDate),(e=>{v(e,a.modelValue)||(n(D,e),C((()=>{r.selectedValue=U(e)})))})),y((()=>a.title),(e=>{r.title=e})),(e,t)=>(g(),w(F,{modelValue:r.selectedValue,"onUpdate:modelValue":t[0]||(t[0]=e=>r.selectedValue=e),"ok-text":e.okText,"cancel-text":e.cancelText,columns:p.value,title:e.title,"three-dimensional":e.threeDimensional,"swipe-duration":e.swipeDuration,"show-toolbar":e.showToolbar,"visible-option-num":e.visibleOptionNum,"option-height":e.optionHeight,onCancel:N,onChange:k,onConfirm:T},{top:b((()=>[V(e.$slots,"top",{},void 0,!0)])),default:b((()=>[V(e.$slots,"default",{},void 0,!0)])),_:3},8,["modelValue","ok-text","cancel-text","columns","title","three-dimensional","swipe-duration","show-toolbar","visible-option-num","option-height"]))}}),[["__scopeId","data-v-703c7b9a"]]);const P=M({props:{},setup(){const e=N(!1),t=N(),a=N(),n=N(!1),o=f({currentDate:new Date(2022,4,10,10,10),currentDate2:new Date(2022,4,10,10,10),currentDate3:new Date(2022,4,10,10,10),currentDate4:new Date(2022,4,10,10,10),currentDate5:new Date(2022,4,10,10,10),currentDate6:new Date(2022,4,10,10,10),currentDate7:new Date(2022,4,10,10,10),currentDate8:new Date(2022,4,10,10,10),currentDate9:new Date(2022,4,10,0,0)});return{show:e,msg:a,showToast:n,popupDesc:t,...T(o),minDate:new Date(2020,0,1),maxDate:new Date(2025,10,1),confirm:({selectedOptions:e})=>{n.value=!0,a.value=e.map((e=>e.text)).join("-")},formatter:(e,t)=>{switch(e){case"year":default:t.text+="";break;case"month":t.text+="月";break;case"day":t.text+="日";break;case"hour":t.text+="时";break;case"minute":t.text+="分"}return t},formatter1:(e,t)=>{switch(e){case"year":t.text+="年";break;case"month":t.text+="月";break;case"day":t.text+="日";break;case"hour":t.text+="时";break;default:t.text+=""}return t},filter:(e,t)=>"hour"===e?t.filter((e=>Number(e.value)%6==0)):t,alwaysFun:()=>{t.value="永远有效",e.value=!1},popupConfirm:({selectedOptions:a})=>{t.value=a.map((e=>e.text)).join(""),e.value=!1}}}},[["render",function(o,r,i,l,m,u){const s=E,c=n,d=a,D=t,p=e,f=S("layout-default-uni");return g(),w(f,null,{default:b((()=>[U("div",{class:"demo"},[U("h2",{class:"title"}," 选择年月日 "),Y(s,{modelValue:o.currentDate,"onUpdate:modelValue":r[0]||(r[0]=e=>o.currentDate=e),"min-date":l.minDate,"max-date":l.maxDate,"three-dimensional":!1,"is-show-chinese":!0,onConfirm:l.confirm},null,8,["modelValue","min-date","max-date","onConfirm"]),U("h2",{class:"title"}," 配合 Popup 使用 "),Y(c,{title:"选择日期",desc:l.popupDesc,onClick:r[1]||(r[1]=e=>l.show=!0)},null,8,["desc"]),Y(D,{visible:l.show,"onUpdate:visible":r[4]||(r[4]=e=>l.show=e),"safe-area-inset-bottom":"",position:"bottom"},{default:b((()=>[Y(s,{modelValue:o.currentDate,"onUpdate:modelValue":r[2]||(r[2]=e=>o.currentDate=e),"min-date":l.minDate,"max-date":l.maxDate,"is-show-chinese":!0,"three-dimensional":!1,onConfirm:l.popupConfirm,onCancel:r[3]||(r[3]=e=>l.show=!1)},{default:b((()=>[Y(d,{block:"",type:"primary",onClick:l.alwaysFun},{default:b((()=>[_(" 永远有效 ")])),_:1},8,["onClick"])])),_:1},8,["modelValue","min-date","max-date","onConfirm"])])),_:1},8,["visible"]),U("h2",{class:"title"}," 选择年月 "),Y(s,{modelValue:o.currentDate2,"onUpdate:modelValue":r[5]||(r[5]=e=>o.currentDate2=e),type:"year-month",title:"日期选择","min-date":new Date(2022,0,1),onConfirm:l.confirm},null,8,["modelValue","min-date","onConfirm"]),U("h2",{class:"title"}," 选择月日 "),Y(s,{modelValue:o.currentDate3,"onUpdate:modelValue":r[6]||(r[6]=e=>o.currentDate3=e),type:"month-day",title:"日期选择","min-date":new Date(2022,0,1),"max-date":new Date(2022,7,1),onConfirm:l.confirm},null,8,["modelValue","min-date","max-date","onConfirm"]),U("h2",{class:"title"}," 选择年月日时分 "),Y(s,{modelValue:o.currentDate4,"onUpdate:modelValue":r[7]||(r[7]=e=>o.currentDate4=e),title:"日期时间选择",type:"datetime","min-date":l.minDate,"max-date":l.maxDate,onConfirm:l.confirm},null,8,["modelValue","min-date","max-date","onConfirm"]),U("h2",{class:"title"}," 选择时分秒 "),Y(s,{modelValue:o.currentDate5,"onUpdate:modelValue":r[8]||(r[8]=e=>o.currentDate5=e),title:"时间选择",type:"time","min-date":l.minDate,"max-date":l.maxDate,onConfirm:l.confirm},null,8,["modelValue","min-date","max-date","onConfirm"]),U("h2",{class:"title"}," 选择时分 "),Y(s,{modelValue:o.currentDate6,"onUpdate:modelValue":r[9]||(r[9]=e=>o.currentDate6=e),title:"时间选择",type:"hour-minute","min-date":l.minDate,"max-date":l.maxDate,onConfirm:l.confirm},null,8,["modelValue","min-date","max-date","onConfirm"]),U("h2",{class:"title"}," 格式化选项 "),Y(s,{modelValue:o.currentDate7,"onUpdate:modelValue":r[10]||(r[10]=e=>o.currentDate7=e),title:"日期选择",type:"datetime","min-date":new Date(2022,0,1),"max-date":new Date(2022,10,1),formatter:l.formatter,onConfirm:l.confirm},null,8,["modelValue","min-date","max-date","formatter","onConfirm"]),U("h2",{class:"title"}," 分钟数递增步长设置 "),Y(s,{modelValue:o.currentDate8,"onUpdate:modelValue":r[11]||(r[11]=e=>o.currentDate8=e),title:"时间选择",type:"time","min-date":l.minDate,"max-date":l.maxDate,"minute-step":5,onConfirm:l.confirm},null,8,["modelValue","min-date","max-date","onConfirm"]),U("h2",{class:"title"}," 过滤选项 "),Y(s,{modelValue:o.currentDate9,"onUpdate:modelValue":r[12]||(r[12]=e=>o.currentDate9=e),title:"时间选择",type:"datehour","min-date":l.minDate,"max-date":l.maxDate,filter:l.filter,formatter:l.formatter1,onConfirm:l.confirm},null,8,["modelValue","min-date","max-date","filter","formatter","onConfirm"]),Y(p,{visible:l.showToast,"onUpdate:visible":r[13]||(r[13]=e=>l.showToast=e),msg:l.msg,type:"text"},null,8,["visible","msg"])])])),_:1})}]]);export{P as default};
