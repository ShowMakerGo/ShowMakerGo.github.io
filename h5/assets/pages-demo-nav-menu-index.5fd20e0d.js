import{D as e,a5 as l,Y as o,d as t,x as a,aT as s,y as n,J as u,bm as i,R as d,Q as p,af as r,P as c,_ as v,g as m,o as h,c as f,w as _,h as y,O as V,b as x,F as C,l as b,N as g,k as w,q as k,X as P,i as I,G as j,E as S,ab as U,a1 as T,a0 as $,a6 as O,a_ as N,aj as W,r as E,U as F,ar as B,v as G,ak as H,j as Q,B as R}from"./index-9a4aa426.js";/* empty css              */import{_ as J}from"./button.37ee0c5d.js";/* empty css              */import{u as q}from"./useProvide.92abce79.js";import{u as A}from"./useRect.14507623.js";import{_ as D}from"./popup.ce3c8dc4.js";import{u as M}from"./useInject.f710a5e3.js";import{_ as X}from"./index.5b7bfc20.js";import"./useSelectorQuery.5ef6b069.js";import"./transition.47a8b3f2.js";import"./overlay.65ef5d67.js";const Y=Symbol("hs-menu"),z={...e,activeColor:l(""),overlay:o,lockScroll:o,duration:{type:[Number,String],default:300},titleIcon:String,closeOnClickOverlay:o,direction:l("down"),scrollFixed:{type:[Boolean,String,Number],default:!1},titleClass:[String],upIcon:l("rect-up"),downIcon:l("rect-down")},K=`${d}-menu`;const L=v(t({name:K,components:{Icon:a},props:z,options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},setup(e){const l=`hs-menu__bar${s()}`,o=n(0),t=n(!1),a=c(),{children:d}=q(Y)({props:e,offset:o}),v=u((()=>d.some((e=>{var l;return null==(l=null==e?void 0:e.state)?void 0:l.showWrapper})))),m=u((()=>p(e,K,{"scroll-fixed":t.value})));return i((l=>{const{scrollFixed:o}=e;o&&function(l){const{scrollFixed:o}=e,a=l.scrollTop;t.value=a>("boolean"==typeof o?30:Number(o))}(l)})),{barId:l,toggleItem:function(t){d.forEach(((s,n)=>{var u;n===t?(u=s,setTimeout((()=>{A(l,a).then((l=>{"down"===e.direction?o.value=l.bottom+r().windowTop:o.value=r().windowHeight-l.top,u.toggle()}))}),100)):s.state.showPopup&&s.toggle(!1,{immediate:!0})}))},children:d,opened:v,classes:m,getClasses:function(l){let o="";const{titleClass:t}=e;return l&&(o+="active"),t&&(o+=` ${t}`),o}}}}),[["render",function(e,l,o,t,a,s){const n=I,u=m("Icon");return h(),f(n,{class:V(e.classes),style:g(e.customStyle)},{default:_((()=>[y(n,{id:e.barId,class:V(["hs-menu__bar",{opened:e.opened}])},{default:_((()=>[(h(!0),x(C,null,b(e.children,((l,o)=>(h(),f(n,{key:o,class:V(["hs-menu__item",{disabled:l.disabled,active:l.state.showPopup}]),style:g({color:l.state.showPopup?e.activeColor:""}),onClick:t=>!l.disabled&&e.toggleItem(o)},{default:_((()=>[y(n,{class:V(["hs-menu__title",e.getClasses(l.state.showPopup)])},{default:_((()=>[y(n,{class:"hs-menu__title-text"},{default:_((()=>[w(k(l.renderTitle()),1)])),_:2},1024),y(n,{class:"hs-menu__title-icon"},{default:_((()=>[P(e.$slots,"icon",{},(()=>["up"===e.direction?(h(),f(u,{key:0,name:"rect-up"})):(h(),f(u,{key:1,name:"rect-down"}))]),!0)])),_:3})])),_:2},1032,["class"])])),_:2},1032,["class","style","onClick"])))),128))])),_:3},8,["id","class"]),P(e.$slots,"default",{},void 0,!0)])),_:3},8,["class","style"])}],["__scopeId","data-v-ddd38fd1"]]),Z={...e,title:String,options:j([]),disabled:Boolean,modelValue:[String,Number],cols:S(1),activeTitleClass:String,inactiveTitleClass:String,optionIcon:l("Check")},ee=`${d}-menu-item`;const le=v(t({name:ee,components:{PopUp:D,Icon:a},props:Z,emits:{[U]:e=>T(e)||$(e),[O]:e=>T(e)||$(e),[N]:()=>!0,[W]:()=>!0},options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},setup(e,{emit:l}){const o=E({showPopup:!1,showWrapper:!1}),{parent:t}=M(Y);return{classes:u((()=>p(e,ee,{"hs-hidden":!o.showWrapper}))),styles:u((()=>{const l="down"===(null==t?void 0:t.props.direction)?{top:`${null==t?void 0:t.offset.value}px`}:{bottom:`${null==t?void 0:t.offset.value}px`};return F(e,l)})),placeholderElementStyle:u((()=>{const e={height:`${null==t?void 0:t.offset.value}px`};return"down"===(null==t?void 0:t.props.direction)?{...e,top:0}:{...e,top:"auto"}})),renderTitle:()=>{var l;if(e.title)return e.title;const o=null==(l=e.options)?void 0:l.find((l=>l.value===e.modelValue));return o?o.text:""},state:o,parent:t,toggle:(e=!o.showPopup,l={})=>{e!==o.showPopup&&(o.showPopup=e,e&&(o.showWrapper=!0))},onClick:t=>{o.showPopup=!1,t.value!==e.modelValue&&(l("update:modelValue",t.value),l("change",t.value))},handleClose:()=>{o.showWrapper=!1},handleVisible:e=>{l(e?N:W)},handleClickOutside:()=>{o.showPopup=!1}}}}),[["render",function(e,l,o,t,a,s){const n=I,u=m("Icon"),i=H,d=m("PopUp");return h(),f(n,{class:V(e.classes),style:g(e.styles)},{default:_((()=>{var o,t,a,s,p,r;return[y(n,{class:V(["hs-menu-item-placeholder-element",{"hs-hidden":!e.state.showPopup,"placeholder-element-up":"up"===(null==(o=e.parent)?void 0:o.props.direction)}]),style:g(e.placeholderElementStyle),onClick:e.handleClickOutside},null,8,["class","style","onClick"]),y(d,B(e.$attrs,{visible:e.state.showPopup,"onUpdate:visible":l[0]||(l[0]=l=>e.state.showPopup=l),"custom-style":{position:"absolute"},"overlay-style":{position:"absolute"},position:"down"===(null==(t=e.parent)?void 0:t.props.direction)?"top":"bottom",duration:null==(a=e.parent)?void 0:a.props.duration,"pop-class":"hs-menu__pop","destroy-on-close":!1,"safe-area-inset-top":!1,overlay:null==(s=e.parent)?void 0:s.props.overlay,"lock-scroll":null==(p=e.parent)?void 0:p.props.lockScroll,"close-on-click-overlay":null==(r=e.parent)?void 0:r.props.closeOnClickOverlay,onClosed:e.handleClose,onOpen:l[1]||(l[1]=l=>e.handleVisible(!0)),onClose:l[2]||(l[2]=l=>e.handleVisible(!1))}),{default:_((()=>[y(i,{"scroll-y":!0},{default:_((()=>[y(n,{id:"hs-menu-item__content",class:"hs-menu-item__content"},{default:_((()=>[(h(!0),x(C,null,b(e.options,((l,o)=>(h(),f(n,{key:o,class:V(["hs-menu-item__option",[{active:l.value===e.modelValue}]]),style:g({"flex-basis":100/e.cols+"%"}),onClick:o=>e.onClick(l)},{default:_((()=>{var o;return[l.value===e.modelValue?(h(),f(n,{key:0,class:V(["hs-menu-item__span",[l.value===e.modelValue?e.activeTitleClass:e.inactiveTitleClass]])},{default:_((()=>[P(e.$slots,"icon",{},(()=>{var l;return[y(u,{name:"Check","custom-color":null==(l=e.parent)?void 0:l.props.activeColor},null,8,["custom-color"])]}),!0)])),_:2},1032,["class"])):G("",!0),y(n,{class:V([l.value===e.modelValue?e.activeTitleClass:e.inactiveTitleClass]),style:g({color:l.value===e.modelValue?null==(o=e.parent)?void 0:o.props.activeColor:""})},{default:_((()=>[w(k(l.text),1)])),_:2},1032,["class","style"])]})),_:2},1032,["class","style","onClick"])))),128)),P(e.$slots,"default",{},void 0,!0)])),_:3})])),_:3})])),_:3},16,["visible","position","duration","overlay","lock-scroll","close-on-click-overlay","onClosed"])]})),_:3},8,["class","style"])}],["__scopeId","data-v-09f93bd7"]]),oe=t({__name:"index",setup(e){const l=E({options1:[{text:"全部商品",value:0},{text:"新款商品",value:1},{text:"活动商品",value:2}],options2:[{text:"默认排序",value:"a"},{text:"好评排序",value:"b"},{text:"销量排序",value:"c"}],options3:[{text:"全部商品",value:0},{text:"家庭清洁/纸品",value:1},{text:"个人护理",value:2},{text:"美妆护肤",value:3},{text:"食品饮料",value:4},{text:"家用电器",value:5},{text:"母婴",value:6},{text:"数码",value:7},{text:"电脑、办公",value:8},{text:"运动户外",value:9},{text:"厨具",value:10},{text:"医疗保健",value:11},{text:"酒类",value:12},{text:"生鲜",value:13},{text:"家具",value:14},{text:"传统滋补",value:15},{text:"汽车用品",value:16},{text:"家居日用",value:17}],value1:0,value2:"a",value3:0}),o=n();function t(){var e;null==(e=o.value)||e.toggle()}function s(e){R({title:JSON.stringify(e)})}return(e,n)=>{const u=X,i=le,d=L,p=J,r=a,c=m("layout-default-uni");return h(),f(c,null,{default:_((()=>[y(u,{"left-show":"",fixed:"","safe-area-inset-top":"",placeholder:"",title:"Menu"}),Q("div",{class:"demo full h-100vh!"},[Q("h2",{class:"title"}," 基础用法 "),y(d,null,{default:_((()=>[y(i,{modelValue:l.value1,"onUpdate:modelValue":n[0]||(n[0]=e=>l.value1=e),options:l.options1},null,8,["modelValue","options"]),y(i,{modelValue:l.value2,"onUpdate:modelValue":n[1]||(n[1]=e=>l.value2=e),options:l.options2,onChange:s},null,8,["modelValue","options"])])),_:1}),Q("h2",{class:"title"}," 自定义菜单内容 "),y(d,null,{default:_((()=>[y(i,{modelValue:l.value1,"onUpdate:modelValue":n[2]||(n[2]=e=>l.value1=e),options:l.options1},null,8,["modelValue","options"]),y(i,{ref_key:"item",ref:o,title:"筛选"},{default:_((()=>[Q("div",{class:"flex flex-1 justify-between items-center"},[Q("div",{style:{marginRight:"10px"}}," 自定义内容 "),y(p,{onClick:t},{default:_((()=>[w(" 确认 ")])),_:1})])])),_:1},512)])),_:1}),Q("h2",{class:"title"}," 一行两列 "),y(d,null,{default:_((()=>[y(i,{modelValue:l.value3,"onUpdate:modelValue":n[3]||(n[3]=e=>l.value3=e),cols:2,options:l.options3},null,8,["modelValue","options"])])),_:1}),Q("h2",{class:"title"}," 自定义选中态颜色 "),y(d,{"active-color":"rgba(74, 222, 128, 1)"},{default:_((()=>[y(i,{modelValue:l.value1,"onUpdate:modelValue":n[4]||(n[4]=e=>l.value1=e),options:l.options1},null,8,["modelValue","options"]),y(i,{modelValue:l.value2,"onUpdate:modelValue":n[5]||(n[5]=e=>l.value2=e),options:l.options2,onChange:s},null,8,["modelValue","options"])])),_:1}),Q("h2",{class:"title"}," 自定义图标 "),y(d,{"down-icon":"triangle-down"},{icon:_((()=>[y(r,{name:"triangle-down"})])),default:_((()=>[y(i,{modelValue:l.value1,"onUpdate:modelValue":n[6]||(n[6]=e=>l.value1=e),options:l.options1},null,8,["modelValue","options"]),y(i,{modelValue:l.value2,"onUpdate:modelValue":n[7]||(n[7]=e=>l.value2=e),"option-icon":"checked",options:l.options2,onChange:s},{icon:_((()=>[y(r,{name:"checked"})])),_:1},8,["modelValue","options"])])),_:1}),Q("h2",{class:"title"}," 向上展开 "),y(d,{direction:"up"},{default:_((()=>[y(i,{modelValue:l.value1,"onUpdate:modelValue":n[8]||(n[8]=e=>l.value1=e),options:l.options1},null,8,["modelValue","options"]),y(i,{modelValue:l.value2,"onUpdate:modelValue":n[9]||(n[9]=e=>l.value2=e),options:l.options2,onChange:s},null,8,["modelValue","options"])])),_:1}),Q("h2",{class:"title"}," 禁用菜单 "),y(d,null,{default:_((()=>[y(i,{modelValue:l.value1,"onUpdate:modelValue":n[10]||(n[10]=e=>l.value1=e),disabled:"",options:l.options1},null,8,["modelValue","options"]),y(i,{modelValue:l.value2,"onUpdate:modelValue":n[11]||(n[11]=e=>l.value2=e),disabled:"",options:l.options2,onChange:s},null,8,["modelValue","options"])])),_:1})])])),_:1})}}});export{oe as default};
