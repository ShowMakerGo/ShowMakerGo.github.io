import{_ as e}from"./index.62654373.js";import{_ as t}from"./price.104d770c.js";/* empty css              */import{d as s,H as a,o,c as l,w as n,k as i,q as r,v as c,X as d,b as u,F as p,l as m,O as k,i as b,R as f,_ as g,a4 as v,a as x,h as y,m as h,y as S,K as _,J as C,ah as O,a7 as j,T as I,D as T,G as B,S as E,ai as N,ac as $,a0 as w,aj as H,a1 as A,N as D,Q as P,ak as G,r as M,t as L,g as U,j as q}from"./index-9a4aa426.js";import{_ as F}from"./button.37ee0c5d.js";/* empty css              */import{_ as R}from"./popup.ce3c8dc4.js";import{a as V}from"./env.43007fb8.js";import{u as Q}from"./useTranslate.6f3ff1af.js";import{_ as X}from"./inputnumber.7298c52c.js";import{_ as z}from"./cell.b00ee112.js";/* empty css              */import"./elevator.bddef4e8.js";import"./transition.47a8b3f2.js";import"./overlay.65ef5d67.js";import"./form.b2296b86.js";import"./useInject.f710a5e3.js";const J=s({name:`${f}-sku-operate`,options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"}}),K=g(s({...J,props:{btnOptions:{type:Array,default:()=>["confirm"]},btnExtraText:{type:String,default:""},buyText:{type:String,default:"立即购买"},addCartText:{type:String,default:"加入购物车"},confirmText:{type:String,default:"确定"},showDefaultOperate:{type:Boolean,default:!0}},emits:[a,"changeSku","changeBuyCount","clickBtnOperate"],setup(e,{emit:t}){const s=e,a=t;return(t,f)=>{const g=b;return e.btnOptions.length>0?(o(),l(g,{key:0,class:"hs-sku-operate"},{default:n((()=>[e.btnExtraText?(o(),l(g,{key:0,class:"hs-sku-operate-desc"},{default:n((()=>[i(r(e.btnExtraText),1)])),_:1})):c("",!0),d(t.$slots,"operateBtn",{},void 0,!0),e.showDefaultOperate?(o(),l(g,{key:1,class:"hs-sku-operate-btn"},{default:n((()=>[(o(!0),u(p,null,m(e.btnOptions,((e,t)=>(o(),l(g,{key:t,class:k(["hs-sku-operate-btn-item",[`hs-sku-operate-btn-${e}`]]),onClick:t=>function(e){a("clickBtnOperate",e)}(e)},{default:n((()=>{return[i(r((t=e,{confirm:s.confirmText,cart:s.addCartText,buy:s.buyText}[t])),1)];var t})),_:2},1032,["class","onClick"])))),128))])),_:1})):c("",!0)])),_:3})):c("",!0)}}}),[["__scopeId","data-v-15fd5763"]]),W=`${f}-sku-header`,{translate:Y}=Q(W),Z=s({name:W,options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"}}),ee=g(s({...Z,props:{goods:{type:Object,default:()=>{}}},setup(e){const s=v(),a=e=>s[e];return(s,u)=>{const p=h,m=b;return o(),l(m,{class:"hs-sku-header"},{default:n((()=>[x(V)?(o(),l(p,{key:1,class:"hs-sku-header-img",src:e.goods.imagePath},null,8,["src"])):(o(),l(p,{key:0,class:"hs-sku-header-img",src:e.goods.imagePath},null,8,["src"])),y(m,{class:"hs-sku-header-right"},{default:n((()=>[a("skuHeaderPrice")?d(s.$slots,"skuHeaderPrice",{key:0},void 0,!0):(o(),l(t,{key:1,price:e.goods.price,"need-symbol":!0,thousands:!1},null,8,["price"])),a("skuHeaderExtra")?d(s.$slots,"skuHeaderExtra",{key:2},void 0,!0):c("",!0),e.goods.skuId&&!a("skuHeaderExtra")?(o(),l(m,{key:3,class:"hs-sku-header-right-extra"},{default:n((()=>[i(r(x(Y)("skuId"))+" : "+r(e.goods.skuId),1)])),_:1})):c("",!0)])),_:3})])),_:3})}}}),[["__scopeId","data-v-a0c4fb8b"]]),te=s({name:`${f}-sku-stepper`,options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"}}),se=g(s({...te,props:{stepperMax:{type:[Number,String],default:99999},stepperMin:{type:[Number,String],default:1},stepperExtraText:{type:[Function,Boolean],default:!1},stepperTitle:{type:String,default:"购买数量"}},emits:["click","changeSku","changeStepper","clickBtnOptions","overLimit","reduce","add"],setup(e,{emit:t}){const s=e,a=t,c=S(s.stepperMin);_((()=>{c.value=s.stepperMin}));const d=C((()=>{const{stepperExtraText:e}=s;return e&&"function"===O(e)?e():""}));function u(e){a("add",e.detail.vlaue)}function p(e){a("reduce",e.detail.vlaue)}function m(e,t){a("overLimit",{action:t,value:Number.parseInt(`${c.value}`)})}function k(e){c.value=e,a("changeStepper",e)}return(t,s)=>{const a=b,f=j;return o(),l(a,{class:"hs-sku-stepper"},{default:n((()=>[y(a,{class:"hs-sku-stepper-title"},{default:n((()=>[i(r(e.stepperTitle),1)])),_:1}),y(f,{class:"hs-sku-stepper-limit",nodes:d.value},null,8,["nodes"]),y(a,{class:"hs-sku-stepper-count"},{default:n((()=>[y(X,{modelValue:c.value,"onUpdate:modelValue":s[0]||(s[0]=e=>c.value=e),min:e.stepperMin,max:e.stepperMax,onAdd:u,onReduce:p,onOverlimit:m,onChange:k},null,8,["modelValue","min","max","onAdd","onReduce","onChange"])])),_:1})])),_:1})}}}),[["__scopeId","data-v-a8b66e12"]]),ae=s({name:`${f}-sku-select`,options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"}}),oe=g(s({...ae,props:{sku:{type:Array,default:()=>[]}},emits:["selectSku"],setup(e,{emit:t}){const s=e,a=t,c=S([]);return I((()=>s.sku),(e=>{c.value=[].slice.call(e)}),{deep:!0}),_((()=>{s.sku.length>0&&(c.value=[].slice.call(s.sku))})),(e,t)=>{const s=b;return o(),l(s,{class:"hs-sku-select"},{default:n((()=>[(o(!0),u(p,null,m(c.value,((e,t)=>(o(),l(s,{key:e.id,class:"hs-sku-select-item"},{default:n((()=>[y(s,{class:"hs-sku-select-item-title"},{default:n((()=>[i(r(e.name),1)])),_:2},1024),y(s,{class:"hs-sku-select-item-skus"},{default:n((()=>[(o(!0),u(p,null,m(e.list,((c,d)=>(o(),l(s,{key:c.name,class:k(["hs-sku-select-item-skus-sku",[{active:!c.disable&&c.active},{disable:c.disable}]]),onClick:s=>function(e,t,s,o){e.checkFlag||e.disable||a("selectSku",{sku:e,skuIndex:t,parentSku:s,parentIndex:o})}(c,d,e,t)},{default:n((()=>[i(r(c.name),1)])),_:2},1032,["class","onClick"])))),128))])),_:2},1024)])),_:2},1024)))),128))])),_:1})}}}),[["__scopeId","data-v-94fde7d9"]]),le={...T,visible:Boolean,sku:B([]),goods:Object,stepperMax:E(99999),stepperMin:E(1),btnOptions:B(["confirm"]),btnExtraText:String,stepperTitle:String,stepperExtraText:{type:[Function,Boolean],default:!1},buyText:String,addCartText:String,confirmText:String},ne={[N]:e=>$(e),selectSku:e=>e instanceof Object,changeStepper:e=>w(e),clickBtnOperate:e=>e instanceof Object,clickCloseIcon:()=>!0,clickOverlay:()=>!0,[H]:()=>!0,reduce:e=>w(e)||A(e)||e instanceof Object,add:e=>w(e)||A(e)||e instanceof Object,overLimit:e=>e instanceof Object},ie=`${f}-sku`,{translate:re}=Q(ie),ce=s({name:ie,options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"}}),de=g(s({...ce,props:le,emits:ne,setup(e,{emit:t}){const s=e,a=t,i=v(),r=S(s.visible),u=S(s.stepperMin),p=C((()=>P(s,ie)));function m(e){a("selectSku",e)}function f(e){u.value=e,a("changeStepper",e)}function g(e){a("add",e)}function h(e){a("reduce",e)}function _(e){a("overLimit",e)}function O(e){a("clickBtnOperate",{type:e,value:u.value})}function j(e){"icon"===e&&a("clickCloseIcon"),"overlay"===e&&a("clickOverlay"),"close"===e&&a(H),r.value=!1}I((()=>s.visible),(e=>{r.value=e})),I((()=>r.value),(e=>{!1===e&&a(N,!1)}));const T=e=>i[e],B=null!=T("skuOperate");return(e,t)=>{const s=b,a=G;return o(),l(R,{visible:r.value,"onUpdate:visible":t[0]||(t[0]=e=>r.value=e),"safe-area-inset-bottom":"",position:"bottom",closeable:"",round:"","custom-style":"height: 75%",onClickCloseIcon:t[1]||(t[1]=e=>j("icon")),onClickOverlay:t[2]||(t[2]=e=>j("overlay")),onClose:t[3]||(t[3]=e=>j("close"))},{default:n((()=>[y(s,{class:k(p.value),style:D(e.customStyle)},{default:n((()=>[d(e.$slots,"skuHeader",{},(()=>[y(ee,{goods:e.goods},{skuHeaderPrice:n((()=>[d(e.$slots,"skuHeaderPrice",{},void 0,!0)])),skuHeaderExtra:n((()=>[d(e.$slots,"skuHeaderExtra",{},void 0,!0)])),_:3},8,["goods"])]),!0),y(a,{"scroll-y":"",class:"hs-sku-content"},{default:n((()=>[y(s,{class:"hs-sku-content-wrapper"},{default:n((()=>[d(e.$slots,"skuSelectTop",{},void 0,!0),d(e.$slots,"skuSelect",{},void 0,!0),T("sku-select")?c("",!0):(o(),l(oe,{key:0,sku:e.sku,onSelectSku:m},null,8,["sku"])),d(e.$slots,"skuStepper",{},(()=>[y(se,{goods:e.goods,"stepper-title":e.stepperTitle||x(re)("buyNumber"),"stepper-max":e.stepperMax,"stepper-min":e.stepperMin,"stepper-extra-text":e.stepperExtraText,onAdd:g,onReduce:h,onChangeStepper:f,onOverLimit:_},null,8,["goods","stepper-title","stepper-max","stepper-min","stepper-extra-text"])]),!0),d(e.$slots,"skuStepperBottom",{},void 0,!0)])),_:3})])),_:3}),y(K,{"btn-extra-text":e.btnExtraText,"btn-options":e.btnOptions,"buy-text":e.buyText||x(re)("buyNow"),"add-cart-text":e.addCartText||x(re)("addToCart"),"confirm-text":e.confirmText||x(re)("confirm"),"show-default-operate":!B,onClickBtnOperate:O},{operateBtn:n((()=>[d(e.$slots,"skuOperate",{},void 0,!0)])),_:3},8,["btn-extra-text","btn-options","buy-text","add-cart-text","confirm-text","show-default-operate"])])),_:3},8,["class","style"])])),_:3},8,["visible"])}}}),[["__scopeId","data-v-f80aefc0"]]),ue=[{id:1,name:"颜色",list:[{name:"亮黑色",id:100016015112,active:!0,disable:!1},{name:"釉白色",id:100016015142,active:!1,disable:!1},{name:"秘银色",id:100016015078,active:!1,disable:!1},{name:"夏日胡杨",id:100009064831,active:!1,disable:!1},{name:"秋日胡杨",id:100009064830,active:!1,disable:!1}]},{id:2,name:"版本",list:[{name:"8GB+128GB",id:100016015102,active:!0,disable:!1},{name:"8GB+256GB",id:100016015122,active:!1,disable:!1}]},{id:3,name:"版本",list:[{name:"4G（有充版）",id:100016015103,active:!0,disable:!1},{name:"5G（有充版）",id:100016015123,active:!1,disable:!1},{name:"5G（无充版）",id:100016015104,active:!0,disable:!0},{name:"5G（无充）质保换新版",id:100016015125,active:!1,disable:!1}]}],pe={skuId:"100016015112",price:"4599.00",imagePath:"//m.360buyimg.com/mobilecms/s750x750_jfs/t1/210630/17/8651/208682/618a5bd6Eddc8ea0e/b5e55e1a03bc0126.jpg!q80.dpg.webp"},me={100009064830:"//img14.360buyimg.com/n4/jfs/t1/160950/40/25098/234168/618a5cb9E65ba975e/7f8f93ea7767a51b.jpg",100009064831:"//img14.360buyimg.com/n4/jfs/t1/203247/8/14659/237368/618a5c87Ecc968774/b0bb25331e5e2d1a.jpg",100016015078:"//img14.360buyimg.com/n4/jfs/t1/215845/12/3788/221990/618a5c4dEc71cb4c7/7bd6eb8d17830991.jpg",100016015112:"//m.360buyimg.com/mobilecms/s750x750_jfs/t1/210630/17/8651/208682/618a5bd6Eddc8ea0e/b5e55e1a03bc0126.jpg!q80.dpg.web",100016015142:"//img14.360buyimg.com/n4/jfs/t1/216079/14/3895/201095/618a5c0cEe0b9e2ba/cf5b98fb6128a09e.jpg"};const ke=g(s({setup(){const e=M({base:!1,notSell:!1,customStepper:!1,customBySlot:!1,showAddressPopup:!1}),t=M({skuData:[],goodsInfo:{},imagePathMap:{}}),s=S("抱歉，此商品在所选区域暂无存货"),a=S("(配送地会影响库存，请先确认)"),o=S([{id:1,addressDetail:"th ",cityName:"石景山区",countyName:"城区",provinceName:"北京",selectedAddress:!0,townName:""},{id:2,addressDetail:"12_ ",cityName:"电饭锅",countyName:"扶绥县",provinceName:"北京",selectedAddress:!1,townName:""},{id:3,addressDetail:"发大水比 ",cityName:"放到",countyName:"广宁街道",provinceName:"钓鱼岛全区",selectedAddress:!1,townName:""},{id:4,addressDetail:"还是想吧百度吧 ",cityName:"研发",countyName:"八里庄街道",provinceName:"北京",selectedAddress:!1,townName:""}]);_((()=>{setTimeout((()=>{t.skuData=ue,t.goodsInfo=pe,t.imagePathMap=me,console.log(pe)}),500)}));return{selectSku:e=>{const{sku:s,parentIndex:a}=e;if(s.disable)return!1;t.skuData[a].list.forEach((e=>{e.active=e.id===s.id})),t.goodsInfo={skuId:s.id,price:"4599.00"},t.skuData[0].list.forEach((e=>{e.active&&!e.disable&&(t.goodsInfo.imagePath=t.imagePathMap[e.id])}))},changeStepper:e=>{console.log("购买数量",e)},clickBtnOperate:e=>{console.log("点击了操作按钮",e)},close:()=>{console.log("选择弹框关闭")},existAddress:o,selectedAddress:(e,t)=>{const{provinceName:s,countyName:o,cityName:l}=t;a.value=`${s}${o}${l}`},addressDesc:a,stepperExtraText:()=>'<span style="width:100%;text-align:right;color:#F00">2 件起售</span>',btnExtraText:s,overLimit:e=>{"reduce"===e.action?console.log(`至少买${e.value}件哦`):console.log(`最多买${e.value}件哦`)},...L(e),...L(t)}}}),[["render",function(s,a,c,d,u,p){const m=z,k=ee,b=de,f=F,g=K,v=t,x=e,h=U("layout-default-uni");return o(),l(h,null,{default:n((()=>[q("div",{class:"demo h-100vh!"},[q("h2",{class:"title"}," 基础用法 "),y(m,{title:"基础用法",desc:"",onClick:a[0]||(a[0]=e=>s.base=!0)}),q("h2",{class:"title"}," 不可售 "),y(m,{title:"不可售",desc:"",onClick:a[1]||(a[1]=e=>s.notSell=!0)}),q("h2",{class:"title"}," 自定义计步器 "),y(m,{title:"自定义计步器",desc:"",onClick:a[2]||(a[2]=e=>s.customStepper=!0)}),q("h2",{class:"title"}," 自定义插槽 "),y(m,{title:"通过插槽自定义设置",desc:"",onClick:a[3]||(a[3]=e=>s.customBySlot=!0)}),y(b,{visible:s.base,"onUpdate:visible":a[4]||(a[4]=e=>s.base=e),goods:s.goodsInfo,sku:s.skuData,"btn-options":["cart","buy"],onSelectSku:s.selectSku,onClose:s.close},{skuHeader:n((()=>[y(k,{goods:s.goodsInfo},null,8,["goods"])])),_:1},8,["visible","goods","sku","onSelectSku","onClose"]),y(b,{visible:s.notSell,"onUpdate:visible":a[5]||(a[5]=e=>s.notSell=e),sku:s.skuData,"btn-extra-text":s.btnExtraText,"btn-options":["buy","cart"],onChangeStepper:s.changeStepper,onSelectSku:s.selectSku,onClose:s.close},{skuHeader:n((()=>[y(k,{goods:s.goodsInfo},null,8,["goods"])])),skuOperate:n((()=>[q("div",{class:"sku-operate-box"},[y(f,{"custom-class":"sku-operate-box-dis",type:"warning"},{default:n((()=>[i(" 查看相似商品 ")])),_:1}),y(f,{"custom-class":"sku-operate-box-dis",type:"info"},{default:n((()=>[i(" 到货通知 ")])),_:1})])])),_:1},8,["visible","sku","btn-extra-text","onChangeStepper","onSelectSku","onClose"]),y(b,{visible:s.customStepper,"onUpdate:visible":a[6]||(a[6]=e=>s.customStepper=e),sku:s.skuData,goods:s.goodsInfo,"stepper-max":7,"stepper-min":2,"stepper-extra-text":s.stepperExtraText,"btn-options":["buy","cart"],onChangeStepper:s.changeStepper,onOverLimit:s.overLimit,onSelectSku:s.selectSku,onClickBtnOperate:s.clickBtnOperate,onClose:s.close},{skuHeader:n((()=>[y(k,{goods:s.goodsInfo},null,8,["goods"])])),skuOperate:n((()=>[y(g,{"btn-options":["buy","cart"],onClickBtnOperate:s.clickBtnOperate},null,8,["onClickBtnOperate"])])),_:1},8,["visible","sku","goods","stepper-extra-text","onChangeStepper","onOverLimit","onSelectSku","onClickBtnOperate","onClose"]),y(b,{visible:s.customBySlot,"onUpdate:visible":a[8]||(a[8]=e=>s.customBySlot=e),sku:s.skuData,goods:s.goodsInfo,"btn-options":["buy","cart"],onSelectSku:s.selectSku,onClickBtnOperate:s.clickBtnOperate,onClose:a[9]||(a[9]=e=>s.close())},{skuHeader:n((()=>[y(k,{goods:s.goodsInfo},{skuHeaderPrice:n((()=>[q("div",null,[y(v,{price:s.goodsInfo.price,"need-symbol":!0,thousands:!1},null,8,["price"]),q("span",{class:"tag"})])])),skuHeaderExtra:n((()=>[q("span",{class:"text-12px c-skyblue"},"重量：0.1kg 编号："+r(s.goodsInfo.skuId),1)])),_:1},8,["goods"])])),skuOperate:n((()=>[q("div",{class:"sku-operate-box"},[y(f,{"custom-class":"sku-operate-item",shape:"square",type:"warning"},{default:n((()=>[i(" 加入购物车 ")])),_:1}),y(f,{"custom-class":"sku-operate-item",shape:"square",type:"primary"},{default:n((()=>[i(" 立即购买 ")])),_:1})])])),skuSelectTop:n((()=>[q("div",{class:"address"},[y(m,{style:{"box-shadow":"none",padding:"13px 0"},title:"送至",desc:s.addressDesc,onClick:a[7]||(a[7]=e=>s.showAddressPopup=!0)},null,8,["desc"])])])),_:1},8,["visible","sku","goods","onSelectSku","onClickBtnOperate"]),y(x,{visible:s.showAddressPopup,"onUpdate:visible":a[10]||(a[10]=e=>s.showAddressPopup=e),type:"exist","exist-address":s.existAddress,"is-show-custom-address":!1,"exist-address-title":"配送至",onClose:s.close,onSelected:s.selectedAddress},null,8,["visible","exist-address","onClose","onSelected"])])])),_:1})}],["__scopeId","data-v-410717b3"]]);export{ke as default};
