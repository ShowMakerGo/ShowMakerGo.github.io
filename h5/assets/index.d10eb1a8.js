import{D as e,S as a,Z as t,ab as n,a0 as o,a6 as l,d as s,aE as r,J as u,y as i,K as c,av as v,o as m,c as d,w as h,k as g,q as b,v as p,h as f,N as y,O as k,C as x,b as T,F as w,l as _,a as C,X as N,aT as V,aU as $,i as j,R as S,P as R,az as A,_ as B}from"./index-9a4aa426.js";import{u as X}from"./form.b2296b86.js";import{u as z}from"./useTouch.ef102360.js";import{u as O}from"./useRect.14507623.js";import{a as E}from"./env.43007fb8.js";const M={...e,modelValue:{type:[Number,Array],default:0},range:Boolean,max:a(100),min:a(0),step:a(1),disabled:Boolean,vertical:Boolean,hiddenRange:Boolean,hiddenTag:Boolean,activeColor:String,inactiveColor:String,buttonColor:String,marks:t({})},P={[n]:e=>o(e)||e instanceof Object,dragStart:()=>!0,[l]:e=>o(e)||e instanceof Object,dragEnd:()=>!0},Y=`${S}-range`,F=s({name:Y,options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"}}),I=B(s({...F,props:M,emits:P,setup(e,{emit:a}){const t=e,o=a,s=R(),S=X(r(t,"disabled")),B=u((()=>`root-${V()}`)),M=i({width:0,height:0}),P=i(0);let F,I;const U=i(),q=z(),D=u((()=>{const{marks:e,max:a,min:n}=t;return Object.keys(e).map(Number.parseFloat).sort(((e,a)=>e-a)).filter((e=>e>=+n&&e<=+a))})),G=u((()=>Number(t.max)-Number(t.min))),H=u((()=>{const e=Y;return{[e]:!0,[`${e}-disabled`]:S.value,[`${e}-vertical`]:t.vertical,[`${e}-show-number`]:!t.hiddenRange}})),J=u((()=>{const e="hs-range-container";return{[e]:!0,[`${e}-vertical`]:t.vertical}})),K=u((()=>({background:t.inactiveColor}))),Z=u((()=>({borderColor:t.buttonColor}))),L=e=>!!t.range&&Array.isArray(e);function Q(){const{modelValue:e,min:a}=t;return L(e)?100*(e[1]-e[0])/G.value+"%":100*(e-Number(a))/G.value+"%"}function W(){const{modelValue:e,min:a}=t;return L(e)?100*(e[0]-Number(a))/G.value+"%":"0%"}const ee=u((()=>t.vertical?{height:Q(),top:W(),background:t.activeColor,transition:U.value?"none":void 0}:{width:Q(),left:W(),background:t.activeColor,transition:U.value?"none":void 0}));function ae(e){const a="hs-range-mark",{modelValue:n,max:o,min:l}=t;let s=Number(l),r=Number(o);if(t.range){const[e,a]=n;s=e,r=a}else r=n;return{[`${a}-text`]:!0,[`${a}-text-active`]:e<=r&&e>=s}}function te(e){const{min:a,vertical:n}=t;let o={left:(e-Number(a))/G.value*100+"%"};return n&&(o={top:(e-Number(a))/G.value*100+"%"}),o}function ne(e){const{modelValue:a,max:n,min:o}=t;let l=Number(o),s=Number(n);if(t.range){const[e,t]=a;l=e,s=t}return{background:e<=s&&e>=l?t.activeColor:t.inactiveColor}}function oe(e){const{min:a,max:n,step:o}=t;return e=Math.max(+a,Math.min(e,+n)),Math.round(e/+o)*+o}function le(e,a){e=L(e)?function(e){return e[0]>e[1]?e.slice(0).reverse():e}(e).map(oe):oe(e),A(e,t.modelValue)||o(n,e),a&&!A(e,F)&&o(l,e)}async function se(e){if(S.value)return;const{min:a,modelValue:n}=t,o=await O(B.value,s);let l,r;M.value.width=o.width,M.value.height=o.height,E?(l=e.clientX,r=e.clientY):(l=e.touches[0].clientX,r=e.touches[0].clientY);let u=l-o.left,i=o.width;t.vertical&&(u=r-o.top,i=o.height);const c=Number(a)+u/i*G.value;if(L(n)){const[e,a]=n;le(c<=(e+a)/2?[c,a]:[e,c],!0)}else le(c,!0)}function re(e){S.value||(q.start(e),I=t.modelValue,F=L(I)?I.map(oe):oe(I),U.value="start",$(e,!0))}async function ue(e){if(S.value)return;$(e,!0),"start"===U.value&&o("dragStart"),q.move(e),U.value="draging",await O(B.value,s);let a=q.deltaX.value,n=M.value.width,l=a/n*G.value;t.vertical&&(a=q.deltaY.value,n=M.value.height,l=a/n*G.value),L(F)?I[P.value]=F[P.value]+l:I=F+l,le(I)}function ie(e){S.value||("draging"===U.value&&(le(I,!0),o("dragEnd")),U.value="",$(e,!0))}function ce(e){return Array.isArray(t.modelValue)&&"number"==typeof e?t.modelValue[e]:Number(t.modelValue)}return c((()=>{v((()=>{O(B.value,s).then((e=>{M.value.width=e.width,M.value.height=e.height}),(()=>{}))}))})),(e,a)=>{const t=j;return m(),d(t,{class:k([J.value,e.customClass]),style:y(e.customStyle)},{default:h((()=>[e.hiddenRange?p("",!0):(m(),d(t,{key:0,class:"hs-range-min"},{default:h((()=>[g(b(+e.min),1)])),_:1})),f(t,{id:B.value,style:y(K.value),class:k(H.value),onClick:x(se,["stop"])},{default:h((()=>[f(t,{class:"hs-range-mark"},{default:h((()=>[D.value.length>0?(m(!0),T(w,{key:0},_(D.value,(e=>(m(),d(t,{key:e,class:k(ae(e)),style:y(te(e))},{default:h((()=>[g(b(e)+" ",1),f(t,{class:"hs-range-tick",style:y(ne(e))},null,8,["style"])])),_:2},1032,["class","style"])))),128)):p("",!0)])),_:1}),f(t,{class:"hs-range-bar",style:y(ee.value)},{default:h((()=>[e.range?(m(),T(w,{key:0},_([0,1],(n=>f(t,{key:n,role:"slider",class:k({"hs-range-button-wrapper-left":0===n,"hs-range-button-wrapper-right":1===n}),"catch-move":!0,tabindex:C(S)?-1:0,"aria-valuemin":+e.min,"aria-valuenow":ce(n),"aria-valuemax":+e.max,"aria-orientation":"horizontal",onTouchstart:x((e=>{"number"==typeof n&&(P.value=n),re(e)}),["stop","prevent"]),onTouchmove:x(ue,["stop","prevent"]),onTouchend:x(ie,["stop","prevent"]),onTouchcancel:x(ie,["stop","prevent"]),onClick:a[0]||(a[0]=e=>e.stopPropagation())},{default:h((()=>[e.$slots.button?N(e.$slots,"button",{key:0},void 0,!0):(m(),d(t,{key:1,class:"hs-range-button",style:y(Z.value)},{default:h((()=>[e.hiddenTag?p("",!0):(m(),d(t,{key:0,class:"number"},{default:h((()=>[g(b(ce(n)),1)])),_:2},1024))])),_:2},1032,["style"]))])),_:2},1032,["class","tabindex","aria-valuemin","aria-valuenow","aria-valuemax","onTouchstart","onTouchmove","onTouchend","onTouchcancel"]))),64)):(m(),d(t,{key:1,role:"slider",class:"hs-range-button-wrapper",tabindex:C(S)?-1:0,"aria-valuemin":+e.min,"aria-valuenow":ce(),"aria-valuemax":+e.max,"aria-orientation":"horizontal","catch-move":!0,onTouchstart:a[1]||(a[1]=x((e=>{re(e)}),["stop","prevent"])),onTouchmove:x(ue,["stop","prevent"]),onTouchend:x(ie,["stop","prevent"]),onTouchcancel:x(ie,["stop","prevent"]),onClick:a[2]||(a[2]=e=>e.stopPropagation())},{default:h((()=>[e.$slots.button?N(e.$slots,"button",{key:0},void 0,!0):(m(),d(t,{key:1,class:"hs-range-button",style:y(Z.value)},{default:h((()=>[e.hiddenTag?p("",!0):(m(),d(t,{key:0,class:"number"},{default:h((()=>[g(b(ce()),1)])),_:1}))])),_:1},8,["style"]))])),_:3},8,["tabindex","aria-valuemin","aria-valuenow","aria-valuemax","onTouchmove","onTouchend","onTouchcancel"]))])),_:3},8,["style"])])),_:3},8,["id","style","class"]),e.hiddenRange?p("",!0):(m(),d(t,{key:1,class:"hs-range-max"},{default:h((()=>[g(b(+e.max),1)])),_:1}))])),_:3},8,["class","style"])}}}),[["__scopeId","data-v-ebc1c774"]]);export{I as _};
