import{D as s,G as e,a5 as a,Y as l,S as t,ai as o,ac as i,ab as c,aj as d,a6 as n,aD as u,d as r,J as v,y as h,r as _,T as m,o as f,c as p,w as y,h as k,O as x,N as b,X as A,x as g,v as w,k as C,q as j,a as S,b as T,F as I,l as O,j as $,Q as E,i as N,ak as z,R as M,_ as D}from"./index-9a4aa426.js";import{p as R,_ as G}from"./popup.ce3c8dc4.js";import{_ as P}from"./elevator.bddef4e8.js";import{u as U}from"./useTranslate.6f3ff1af.js";const V={...R,...s,modelValue:e([]),visible:Boolean,type:a("custom"),customAddressTitle:a(""),province:e([]),city:e([]),country:e([]),town:e([]),isShowCustomAddress:l,existAddress:e([]),existAddressTitle:a(""),customAndExistTitle:a(""),height:t("200"),columnsPlaceholder:{type:[String,Array],default:""}},q={[o]:s=>i(s),[c]:()=>!0,[d]:s=>s instanceof Object,[n]:s=>s instanceof Object,switchModule:s=>s instanceof Object,closeMask:s=>s instanceof Object,[u]:(s,e,a)=>s instanceof Object&&e instanceof Object&&a instanceof Object},B=`${M}-address`,{translate:F}=U(B),H=r({name:B,options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"}}),J=D(r({...H,props:V,emits:q,setup(s,{emit:e}){const a=s,l=e,t=v((()=>E(a,B))),i=h(a.visible),r=h(a.type),M=h(0),D=h(0),R=h(["province","city","country","town"]),U=h([0,0,0,0]),V=h(0),q=_([]),H=v((()=>{switch(M.value){case 0:return a.province;case 1:return a.city;case 2:return a.country;default:return a.town}}));function J(s){if(!Array.isArray(s))throw new TypeError("params muse be array.");if(!s.length)return[];s.forEach((s=>{s.title||console.warn("[NutUI] <Address> 请检查数组选项的 title 值是否有设置 ,title 为必填项 .")}));const e=[];return(s=s.sort(((s,e)=>s.title.localeCompare(e.title)))).forEach((s=>{const a=e.findIndex((e=>e.title===s.title));a<=-1?e.push({title:s.title,list:[].concat(s)}):e[a].list.push(s)})),e}const Q=h([]);let W=_({});const X=h("self");function Y(s,e){return s&&s.name||M.value<e&&s?s.name:a.columnsPlaceholder[e]||F("select")}function K(s="self"){X.value="cross"===s?"cross":"self",i.value=!1}function L(){X.value="mask"}function Z(s){var e;const a=M.value;D.value=M.value;const t={custom:R.value[a]};Q.value[a]=s,Q.value.splice(a+1,Q.value.length-(a+1)),t.value=s,(null==(e=q[a+1])?void 0:e.length)>0?(M.value=a+1,t.next=R.value[M.value],es()):(K(),l(c)),l(n,t)}function ss(s){U.value[M.value]=s.detail.scrollTop}function es(){setTimeout((()=>{V.value=U.value[M.value]}))}function as(){Q.value=[],M.value=0,es()}function ls(){const s={addressIdStr:"",addressStr:"",province:Q.value[0],city:Q.value[1],country:Q.value[2],town:Q.value[3]},e={data:{},type:r.value};["custom","custom2"].includes(r.value)?([0,1,2,3].forEach((e=>{const a=Q.value[e];s.addressIdStr+=`${e?"_":""}${a&&a.id||0}`,s.addressStr+=a&&a.name||""})),e.data=s):e.data=W,as(),"self"===X.value?l(d,e):l("closeMask",{closeWay:X.value}),l(o,!1)}function ts(){const s=r.value;r.value="exist"===s?"custom":"exist",as(),l("switchModule",{type:r.value})}function os(s,e){Z(e)}return m((()=>a.visible),(s=>{i.value=s})),m((()=>i.value),(s=>{s&&function(){q[0]=a.province||[],q[1]=a.city||[],q[2]=a.country||[],q[3]=a.town||[];const s=a.modelValue,e=s.length;if(e>0){if(M.value=e-1,0===H.value.length)return void(M.value=0);for(let a=0;a<e;a++){const e=q[a];Q.value[a]=e.filter((e=>e.id===s[a]))[0]}es()}}()})),(s,e)=>{const o=N,c=z;return f(),p(G,{visible:i.value,"onUpdate:visible":e[1]||(e[1]=s=>i.value=s),"z-index":s.zIndex,position:"bottom","lock-scroll":s.lockScroll,round:s.round,onClose:ls,onClickOverlay:L,onOpen:e[2]||(e[2]=s=>X.value="self")},{default:y((()=>[k(o,{class:x(t.value),style:b(s.customStyle)},{default:y((()=>[k(o,{class:"hs-address__header"},{default:y((()=>[k(o,{class:"hs-address__header-back",onClick:ts},{default:y((()=>["exist"===s.type&&"custom"===r.value?A(s.$slots,"backIcon",{key:0},(()=>[k(g,{name:"left",size:"14px"})]),!0):w("",!0)])),_:3}),k(o,{class:"hs-address__header__title"},{default:y((()=>[C(j("custom"===r.value?s.customAddressTitle||S(F)("selectRegion"):s.existAddressTitle||S(F)("deliveryTo")),1)])),_:1}),k(o,{class:"hs-address__header-close",onClick:e[0]||(e[0]=s=>K("cross"))},{default:y((()=>[A(s.$slots,"closeIcon",{},(()=>[k(g,{name:"close","custom-color":"#cccccc",size:"14px"})]),!0)])),_:3})])),_:3}),["custom","custom2"].includes(r.value)?(f(),p(o,{key:0,class:"hs-address__custom"},{default:y((()=>[k(o,{class:"hs-address__region"},{default:y((()=>[(f(!0),T(I,null,O(Q.value,((s,e)=>(f(),p(o,{key:e,class:x(["hs-address__region-item",[e===M.value?"active":""]]),onClick:a=>function(s,e){D.value=M.value,Y(s,e)&&(M.value=e,es())}(s,e)},{default:y((()=>[k(o,null,{default:y((()=>[C(j(Y(s,e)),1)])),_:2},1024),k(o,{class:x(["hs-address__region-line--mini",{active:e===M.value}])},null,8,["class"])])),_:2},1032,["class","onClick"])))),128)),M.value===Q.value.length?(f(),p(o,{key:0,class:"active hs-address__region-item"},{default:y((()=>[k(o,null,{default:y((()=>[C(j(Y(null,Q.value.length)),1)])),_:1}),k(o,{class:"hs-address__region-line--mini active"})])),_:1})):w("",!0)])),_:1}),"custom"===r.value?(f(),p(o,{key:0,class:"hs-address__detail"},{default:y((()=>[$("div",{class:"hs-address__detail-list"},[k(c,{"scroll-y":!0,style:{height:"100%"},"scroll-top":V.value,onScroll:ss},{default:y((()=>[(f(!0),T(I,null,O(H.value,((e,a)=>{var l;return f(),T("div",{key:a,class:x(["hs-address__detail-item",[(null==(l=Q.value[M.value])?void 0:l.id)===e.id?"active":""]]),onClick:s=>Z(e)},[k(o,null,{default:y((()=>{var a;return[(null==(a=Q.value[M.value])?void 0:a.id)===e.id?A(s.$slots,"icon",{key:0},(()=>[k(g,{name:"Check","custom-class":"hs-address-select-icon",width:"13px"})]),!0):w("",!0),C(j(e.name),1)]})),_:2},1024)],10,["onClick"])})),128))])),_:3},8,["scroll-top"])])])),_:3})):(f(),p(o,{key:1,class:"hs-address__elevator-group"},{default:y((()=>[k(P,{height:s.height,"index-list":J(H.value),onClickItem:os},null,8,["height","index-list"])])),_:1}))])),_:3})):"exist"===r.value?(f(),p(o,{key:1,class:"hs-address__exist"},{default:y((()=>[$("div",{class:"hs-address__exist-group"},[$("ul",{class:"hs-address__exist-group-list"},[(f(!0),T(I,null,O(s.existAddress,((e,t)=>(f(),T("li",{key:t,class:x(["hs-address__exist-group-item",[e.selectedAddress?"active":""]]),onClick:s=>function(s){const e=a.existAddress;let t={};e.forEach((s=>{s&&s.selectedAddress&&(t=s),s.selectedAddress=!1})),s.selectedAddress=!0,W=s,l(u,t,s,e),K()}(e)},[e.selectedAddress?w("",!0):A(s.$slots,"unselectedIcon",{key:0},(()=>[k(g,{name:"location2","custom-class":"hs-address-select-icon",width:"13px"})]),!0),e.selectedAddress?A(s.$slots,"icon",{key:1},(()=>[k(g,{name:"Check","custom-class":"hs-address-select-icon",width:"13px"})]),!0):w("",!0),$("div",{class:"hs-address__exist-item-info"},[e.name&&e.phone?(f(),T("div",{key:0,class:"hs-address__exist-item-info-top"},[$("div",{class:"hs-address__exist-item-info-name"},j(e.name),1),$("div",{class:"hs-address__exist-item-info-phone"},j(e.phone),1)])):w("",!0),$("div",{class:"hs-address__exist-item-info-bottom"},[k(o,null,{default:y((()=>[C(j(e.provinceName+e.cityName+e.countyName+e.townName+e.addressDetail),1)])),_:2},1024)])])],10,["onClick"])))),128))])]),s.isShowCustomAddress?(f(),T("div",{key:0,class:"hs-address__exist-choose",onClick:ts},[$("div",{class:"hs-address__exist-choose-btn"},j(s.customAndExistTitle||S(F)("chooseAnotherAddress")),1)])):w("",!0),s.isShowCustomAddress?w("",!0):A(s.$slots,"bottom",{key:1},void 0,!0)])),_:3})):w("",!0)])),_:3},8,["class","style"])])),_:3},8,["visible","z-index","lock-scroll","round"])}}}),[["__scopeId","data-v-dc4dd16b"]]);export{J as _};
